{% macro build_navbar(current_uri) %}
    {% import 'macros.twig' as macros %}
    {{ macros.create_navbar(navbar.get(), current_uri) }}
{% endmacro %}

{% macro get_item_title(item) %}
    {% if item is iterable %}
        {{item[0]}}
    {% else %}
        {{item}}
    {% endif %}
{% endmacro %}

{% macro get_active_title(current_uri) %}
    {% import _self as nav %}
    {% if current_uri == '/' or current_uri == '/index.php' %}
        {% trans %}Free, open source DAW for Windows, Mac and Linux.{% endtrans %}
    {% endif %}
    {% for item in navbar.get() %}
        {% if item[1] and current_uri starts with item[1] %}
            {{nav.get_item_title(item[0])}}
        {% elseif item[2] is defined and item[2] is iterable %}
            {% for child in item[2] %}
                {% if child[2] and current_uri starts with child[2] %}
                    {{nav.get_item_title(child[1])}}
                {% endif %}
            {% endfor %}
        {% endif %}
    {% endfor %}
{% endmacro %}
{% macro get_item_description(page) %}
    {% set description = {
        'Home' : 'LMMS is a free, open source, cross-platform digital audio workstation. Beginner-oriented and available for Windows, Mac and Linux.'|trans,
        'Download' : 'Downloading and using LMMS is free! Just choose the operating system you want to run LMMS on'|trans,
        'Get Involved' : 'LMMS is a free, open-source software built entirely by a small number of volunteers in their free time. But to keep the project going, we need this number to grow. So if you feel like giving something back to the community, join us in making LMMS better!'|trans,
        'Forum' : 'LMMS forum'|trans,
        'Sharing Platform' : 'Made something cool? Share your work with the LMMS community!'|trans,
        'Showcase' : 'Tracks made in LMMS.'|trans,
        'Competitions' : 'Official competitions organised by LMMS and its community members.'|trans,
        'Branding': 'Download LMMS Artwork'|trans,
      }
    %}
	{{description[page]|default("LMMS is a free, open source, cross-platform digital audio workstation.")}}
{% endmacro %}
{% macro get_active_description(current_uri) %}
    {% import _self as nav %}

    {% if current_uri == '/' or current_uri == '/index.php' %}
        {{nav.get_item_description('Home')}}
    {% endif %}
    {% for item in navbar.get() %}
        {% if item[1] and current_uri starts with item[1] %}
            {{nav.get_item_description(item[0])}}
        {% elseif item[2] is defined and item[2] is iterable %}
            {% for child in item[2] %}
                {% if child[2] and current_uri starts with child[2] %}
                    {{nav.get_item_description(child[1])}}
                {% endif %}
            {% endfor %}
        {% endif %}
    {% endfor %}

{% endmacro %}
